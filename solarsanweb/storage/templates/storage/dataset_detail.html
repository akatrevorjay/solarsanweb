{% extends 'storage/pool_detail.html' %}

{% block dataset_info %}

<!-- Dataset Detail -->
{% if not dataset %}
{% set dataset = pool.filesystem %}
{% endif %}

{% set dataset_path = dataset.path() %}
<div class="row">
    <div class="navbar dataset-detail-nav dataset-detail-list">
        <div class="navbar-inner">
            <div class="container" style="width: auto;">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".dataset-detail-nav .nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <a class="brand" href="#">{{ dataset_path[0] }} {{ dataset.path(1)|join('/') }}</a>

                <div class="nav-collapse">
                    <ul class="nav dataset-detail-nav">
                        {% if dataset.pool.name == dataset.name %}
                            <li><a href="/storage/pools/health/{{ dataset.pool.name|urlize }}">Pool Health</a></li>
                        {% endif %}
                        <li><a href="/storage/datasets/health/{{ dataset.name|urlize }}">Health</a></li>
                        <li><a href="/storage/datasets/snapshots/{{ dataset.name|urlize }}">Snapshots</a></li>
                    </ul>

                    <ul class="nav pull-right">
                         <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tasks <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                {% if dataset.pool.name == dataset.name %}
                                    <li><a href="/storage/datasets/snapshot/{{ dataset.name|urlize }}">Snapshot</a></li>
                                {% else %}
                                    <li><a href="/storage/datasets/snapshot/{{ dataset.name|urlize }}">Snapshot</a></li>
                                    {#<li><a href="#">Clone</a></li>#}
                                    <li class="divider"></li>
                                    <li><a href="/storage/datasets/destroy/{{ dataset.name|urlize }}">Destroy</a></li>
                                    {#<li class="divider"></li>
                                    <li><a href="#">Separated link</a></li>#}
                                {% endif %}
                            </ul>
                        </li>
                   </ul>
                </div><!-- /.nav-collapse -->
            </div>
        </div><!-- /navbar-inner -->
    </div><!-- /navbar -->
</div>

<div class="row">
    <div id="dataset-detail-content" class="well">
        {% block dataset_detail %}
            {% if dataset.name == dataset.pool.name %}
                {% with pool = dataset.pool %}
                {% include 'storage/pool_health.html' %}
                {% endwith %}
            {% else %}
                {% include 'storage/dataset_health.html' %}
            {% endif %}
        {% endblock %}
    </div>
</div>

{% endblock %}

